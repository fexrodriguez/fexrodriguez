
            <div class="card-body">
                <form id="NMIForm"  method="post" class="form">
                    <div class="card-body p-9">
                        
                         <div class="row mb-6">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">Select ANP: </label>
                            <div class="col-lg-3 fv-row">
                                <select id="PlantNMI" name="PlantNMI" class="form-select form-select-sm form-select p-3 fs-8" data-control="select2" data-placeholder="-- Select a plant--" data-allow-clear="true">
                                    <option></option>
                                    @*@foreach (var item in Model)
                                    {
                                        <option value="@item.Value">@item.Text</option>
                                    }*@
                                </select>
                            </div>
                        </div>
                        <div class="row mb-9">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">Vendor: </label>
                            <div class="col-lg-3 fv-row">
                                <select id="PlantNMI" name="PlantNMI" class="form-select form-select-sm form-select p-3 fs-8" data-control="select2" data-placeholder="-- Select a plant--" data-allow-clear="true">
                                    <option></option>
                                    @*@foreach (var item in Model)
                                    {
                                        <option value="@item.Value">@item.Text</option>
                                    }*@
                                </select>
                            </div>
                            <div class="col-lg-1 fv-row">
                                <button class="btn btn-primary p-3 fs-8">+ New</button>
                            </div>
                        </div>
                        <div class="row mb-9">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">Item Code: </label>
                            <div class="col-lg-3 fv-row">
                                <input type="text" id="ReportedByNMI" name="ReportedByNMI" class="form-control p-3 fs-8"/>
                            </div>
                            <div class="col-lg-1 fv-row">
                                <button class="btn btn-primary p-3 fs-8">O~</button>
                            </div>
                        </div>
                        <div class="row mb-6">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">Middle Code: </label>
                            <div class="col-lg-3 fv-row">
                                <input type="text" id="ReportedByNMI" name="ReportedByNMI" class="form-control p-3 fs-8" disabled/>
                            </div>
                        </div>
                        <div class="row mb-6">
                            <label class="col-lg-3 col-form-label fw-bold fs-6"></label>
                            <div class="col-lg-3 fv-row">
                                <input class="form-check-input" type="checkbox" value="1" id="flexCheckDefault"/>
                                <label class="form-check-label me-4" for="flexCheckDefault">
                                    OEM?
                                </label>
                                <input class="form-check-input" type="checkbox" value="1" id="flexCheckDefault"/>
                                <label class="form-check-label" for="flexCheckDefault">
                                    Critical List?
                                </label>
                            </div>
                        </div>
                        <div class="row mb-6">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">List Actual Providers: </label>
                            <div class="col-lg-3 fv-row">
                               
                            </div>
                        </div>
                          <div class="row mb-6">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">Part Number Item-Vendero: </label>
                            <div class="col-lg-3 fv-row">
                                <input type="text" id="ItemCodeNMI" name="ItemCodeNMI" class="form-control p-3 fs-8" placeholder="Item Code" disabled/>
                            </div>
                        </div>
                        <div class="row mb-6">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">Job: </label>
                            <div class="col-lg-3 fv-row">
                                <input type="text" id="MiddleCodeNMI" name="MiddleCodeNMI" class="form-control p-3 fs-8" placeholder="Middle code"/>
                            </div>
                        </div>
                        <div class="row mb-6">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">Item description: </label>
                            <div class="col-lg-3 fv-row">
								<div class="form-check form-check-custom form-check-solid me-10">
                                    <input class="form-check-input h-30px w-30px" type="checkbox" value="" id="flexCheckbox30"/>
                                    <label class="form-check-label" for="flexCheckbox30">
                                        40px
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-6">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">Comments to Approval Reason: </label>
                            <div class="col-lg-6 fv-row">
                                <textarea id="CommentIT" name="CommentIT" class="form-control" rows="4" maxlength="300" data-kt-autosize="true"></textarea>
                            </div>
                        </div>
                        <div class="row mb-6">
                            <label class="col-lg-3 col-form-label fw-bold fs-6"> </label>
                            <div class="col-lg-2 fv-row">
                                <div class="input-group mb-5">
                                    <span class="input-group-text text-danger">$</span>
                                    <input type="text" class="form-control" aria-label="Amount (to the nearest dollar)"/>
                                    <span class="input-group-text">.00</span>
                                </div>
                            </div>
                            <div class="col-lg-2 fv-row">
                                <div class="input-group mb-5">
                                    <span class="input-group-text text-danger">$</span>
                                    <input type="text" class="form-control" aria-label="Amount (to the nearest dollar)"/>
                                    <span class="input-group-text">.00</span>
                                </div>
                            </div>
                            <div class="col-lg-2 fv-row">
                                <!--begin::Dialer-->
                                <div class="input-group w-md-300px"
                                    data-kt-dialer="true"
                                    data-kt-dialer-min="1000"
                                    data-kt-dialer-max="50000"
                                    data-kt-dialer-step="1000"
                                    data-kt-dialer-prefix="$">

                                    <!--begin::Decrease control-->
                                    <button class="btn btn-icon btn-outline btn-active-color-primary" type="button" data-kt-dialer-control="decrease">
                                        <i class="bi bi-dash fs-1"></i>
                                    </button>
                                    <!--end::Decrease control-->

                                    <!--begin::Input control-->
                                    <input type="text" class="form-control" readonly placeholder="Amount" value="$10000" data-kt-dialer-control="input"/>
                                    <!--end::Input control-->

                                    <!--begin::Increase control-->
                                    <button class="btn btn-icon btn-outline btn-active-color-primary" type="button" data-kt-dialer-control="increase">
                                        <i class="bi bi-plus fs-1"></i>
                                    </button>
                                    <!--end::Increase control-->
                                </div>
                                <!--end::Dialer-->
                            </div>
                            <div class="col-lg-2 fv-row">
                                 <input type="text" id="" name="" class="form-control p-3 fs-8" placeholder="0" />
                            </div>
                        </div>
                        <div class="row mb-6">
                            <label class="col-lg-3 col-form-label required fw-bold fs-6">File: </label>
                            <div class="col-lg-3 fv-row">
                               <select id="PlantNMI" name="PlantNMI" class="form-select form-select-sm form-select p-3 fs-8" data-control="select2" data-placeholder="-- Select a plant--" data-allow-clear="true">
                                    <option></option>
                                    @*@foreach (var item in Model)
                                    {
                                        <option value="@item.Value">@item.Text</option>
                                    }*@
                                </select>
                            </div>
                        </div>
                        <div class="row mt-12">
                            <div class="col-md-9 offset-md-3">
                                <button type="button" class="btn btn-primary" id="itbutton_submit">
                                    <span class="indicator-label">Save</span>
                                    <span class="indicator-progress">
                                        Please wait...
                                        <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            @if (Model != null)
            {
                <script>
                    $("#DateMissingNMI").flatpickr();
                    
                    $('#NICode').maxlength({
                        threshold: 250,
                        warningClass: "badge badge-danger",
                        limitReachedClass: "badge badge-success",
                        separator: ' of ',
                        preText: 'You have ',
                        postText: ' chars remaining.',
                        validate: true
                    });

                    $('#NIDescription').maxlength({
                        threshold: 85,
                        warningClass: "badge badge-danger",
                        limitReachedClass: "badge badge-success",
                        separator: ' of ',
                        preText: 'You have ',
                        postText: ' chars remaining.',
                        validate: true
                    });


                    //---------------------------------------------------------------------------------------------------------
                    function sendFormNI() {
                        var NICode = $('#NICode').val();
                        var NIDescription = $('#NIDescription').val();
                        var NIMiddleCode = $('#NIMiddleCode').val();
                        var PurchaserNI = $('#PurchaserNI').val();
                        var IdMenuService = '@ViewData["MenuId"]';

                        $.ajax({
                url: "@Url.Action("CreatNewItem","ServiceMenu")",

                            type: "post",
                            data:
                            {
                                NICode: NICode,
                                NIDescription: NIDescription,
                                NIMiddleCode: NIMiddleCode,
                                PurchaserNI: PurchaserNI,
                                IdMenuService: IdMenuService
                            },
                            beforeSend: function(xhr) {
                                xhr.setRequestHeader("XSRF-TOKEN",
                                    $('input:hidden[name="__RequestVerificationToken"]').val());
                            },
                        })
                            .done(function(result) {
                                if (result != null) {
                                    if (result == 'noSession') {
                                        swalExpired()
                                    }
                                    else if (result == 'Sorry') {
                                        swalNoAuthorized()
                                    }
                                    else if (result == "correct") {
                                        toastr.success("New Item was save success.!");
                                        $('#NICode').val(null);
                                        $('#NIDescription').val(null);
                                        $('#NIMiddleCode').val(null);
                                        $('#PurchaserNI').val(null).trigger('change');
                                    }
                                    else {
                                        toastr.error("An error occurred on the server, please try again later!");
                                    }
                                }
                                else {
                                    toastr.error("An error occurred on the server, please try again later!");
                                }
                            })
                            .fail(function(xhr, status, error) {
                                alert("Error del servidor");
                            })
                    }

                    //--------------------------------------------------------------------------------------------------

                    "use strict";

                    // Class definition
                    var KTAccountSettingsSigninMethods = function() {

                        var formWorkOrdersHR = function(e) {
                            var validation;

                            // form elements
                            var NIForm = document.getElementById('NIForm');

                            validation = FormValidation.formValidation(
                                NIForm,
                                {
                                    fields: {
                                        NICode: {
                                            validators: {
                                                notEmpty: {
                                                    message: 'Item Code is required'
                                                }
                                            }
                                        },
                                        NIDescription: {
                                            validators: {
                                                notEmpty: {
                                                    message: 'Item Description is required'
                                                }
                                            }
                                        },
                                        NIMiddleCode: {
                                            validators: {
                                                notEmpty: {
                                                    message: 'Middle code is required'
                                                }
                                            }
                                        },
                                        PurchaserNI: {
                                            validators: {
                                                notEmpty: {
                                                    message: 'Purchaser is required'
                                                }
                                            }
                                        },

                                    },

                                    plugins: { //Learn more: https://formvalidation.io/guide/plugins
                                        trigger: new FormValidation.plugins.Trigger(),
                                        bootstrap: new FormValidation.plugins.Bootstrap5({
                                            rowSelector: '.fv-row'
                                        })
                                    }
                                }
                            );

                            NIForm.querySelector('#itbutton_submit').addEventListener('click', function(e) {
                                e.preventDefault();

                                validation.validate().then(function(status) {

                                    if (status == 'Valid') {
                                        sendFormNI()
                                        validation.resetForm();
                                    }
                                    else {
                                        swal.fire({
                                            text: "Sorry, looks like there are some errors detected, please try again.",
                                            icon: "error",
                                            buttonsStyling: false,
                                            confirmButtonText: "Ok, got it!",
                                            customClass: {
                                                confirmButton: "btn font-weight-bold btn-light-primary"
                                            }
                                        });

                                    }
                                });
                            });
                        }

                        // Public methods
                        return {
                            init: function() {
                                formWorkOrdersHR();
                            }
                        }
                    }();

                    // On document ready
                    KTUtil.onDOMContentLoaded(function() {
                        KTAccountSettingsSigninMethods.init();
                    });
                </script>
            }