@using FactoryPlatform.Areas.Quality.Models.Reports.Modelos.ModelsSequencesList
@model R_ModelsSequencesListViewModel
@{
    ViewData["Title"] = ViewData["Titulo"];
}


<div class="post d-flex flex-column-fluid border" id="kt_post">
    <div id="kt_content_container" class="container-fluid">
        <div id="kt_block">
            <div class="card mb-5">
                <div class="card-body p-5 mb-0" id="BlockPantalla">

                    @if(Model.R_Secuence.Any())
                    {
                        <div class="card-header align-items-center py-5 gap-2 gap-md-5">
                            <div class="card-title">
                                <div class="d-flex align-items-center position-relative my-1">
                                    <span class="svg-icon svg-icon-1 position-absolute ms-4"><i class="fas fa-search"></i></span>
                                    <input type="text" data-kt-filter="searchMFList" class="form-control form-control-solid w-250px ps-13" placeholder="Search Report" />
                                </div>
                                <div id="TablaModelSecuencesList_export" class="d-none"></div>
                            </div>
                            <div class="card-toolbar flex-row-fluid justify-content-end gap-5">
                                <button type="button" class="btn btn-light-primary" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
                                    <span class="svg-icon svg-icon-1 position-absolute ms-4"></span>
                                    Export Report
                                </button>
                                <div id="TablaModelSecuencesList_export_menu" class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-200px py-4" data-kt-menu="true">
                                    <div class="menu-item px-3">
                                        <a href="#" class="menu-link px-3" data-kt-exportMFList="excel">
                                            Export as excel &nbsp;&nbsp; <i class="fas fa-file-excel text-success fs-3"></i>
                                        </a>
                                    </div>
                                    <div class="menu-item px-3">
                                        <a href="#" class="menu-link px-3" data-kt-exportMFList="csv">
                                            Export as csv &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-file-csv text-info fs-3"></i>
                                        </a>
                                    </div>
                                    <div class="menu-item px-3">
                                        <a href="#" class="menu-link px-3" data-kt-exportMFList="pdf">
                                            Export as pdf &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-file-pdf text-danger fs-3"></i>
                                        </a>
                                    </div>
                                </div>
                                <div id="TablaModelSecuencesList_buttons" class="d-none"></div>
                            </div>
                        </div>
                        <div class="card-body">
                            <table id="TablaModelSecuencesList" class="table border-gray-400 table-hover table-row-bordered gy-4 gs-7">
                                <thead>
                                    <tr class="fw-bold fs-6 text-gray-800 text-uppercase bg-gray-300 border-top">
                                        <th class="min-w-50px  align-middle border-end text-center">ID#</th>
                                        <th class="min-w-50px  align-middle border-end text-center">Model</th>
                                        <th class="min-w-300px align-middle border-end text-center">Proof</th>
                                        <th class="min-w-100px align-middle border-end text-center">Sequence</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        var N1 = 1;
                                        @foreach (var item in Model.R_Secuence)
                                        {
                                            <tr>
                                                <td>@N1</td>
                                                <td>@item.Modelo</td>
                                                <td>@item.Descripcion</td>
                                                <td>@item.Secuencia</td>
                                            </tr>
                                            N1++;
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-warning d-flex align-items-center p-5">
                            <span class="svg-icon svg-icon-2x svg-icon-light me-4">
                                <i class="fas fa-exclamation-triangle fs-2x text-warning"></i>
                            </span>
                            <div class="d-flex flex-column">
                                <h6 class="text-warning">No data in the moment</h6>
                            </div>
                        </div>
                    }

                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    @*Libreria datatable *@
    <script type="text/javascript">
        var KTDatatablesTablaModelSecuencesList = function () {
            var table;
            var datatable;

            var initDatatableModels = function () {
                const tableRows = table.querySelectorAll('tbody tr');

                tableRows.forEach(row => {
                    const dateRow = row.querySelectorAll('td');
                });

                datatable = $(table).DataTable({
                    "info": true,
                    "order": [],
                    "pageLength": 100,
                    "scrollY": "500px",
                    "scrollCollapse": true,
                    "scrollX": true,
                    "columns": [
                        { className: "border-end  border-gray-400 border-start min-w-50px text-center", },
                        { className: "border-end  border-gray-400 min-w-50px text-center", },
                        { className: "border-end  border-gray-400 min-w-300px text-center", },
                        { className: "border-end  border-gray-400 min-w-100px text-center", },
                    ],

                });
            }

            // Hook export buttons
            var exportButtons = () => {
                const documentTitle = 'Report Model Feature List';
                var buttons = new $.fn.dataTable.Buttons(table, {
                    buttons: [
                        {
                            extend: 'copyHtml5',
                            title: documentTitle
                        },
                        {
                            extend: 'excelHtml5',
                            title: documentTitle
                        },
                        {
                            extend: 'csvHtml5',
                            title: documentTitle
                        },
                        {
                            extend: 'pdfHtml5',
                            title: documentTitle
                        }
                    ]
                }).container().appendTo($('#TablaModelSecuencesList_buttons'));

                const exportButtons = document.querySelectorAll('#TablaModelSecuencesList_export_menu [data-kt-exportMFList]');
                exportButtons.forEach(exportButton => {
                    exportButton.addEventListener('click', e => {
                        e.preventDefault();

                        var exportValue = e.target.getAttribute('data-kt-exportMFList');
                        var target = document.querySelector('div[id="TablaModelSecuencesList_buttons"]');
                        target = target.querySelector('.buttons-' + exportValue);

                        target.click();
                    });
                });
            }

            var handleSearchDatatableModels = () => {
                const filterSearch = document.querySelector('[data-kt-filter="searchMFList"]');
                filterSearch.addEventListener('keyup', function (e) {
                    datatable.search(e.target.value).draw();
                });
            }

            return {
                init: function () {
                    table = document.querySelector('#TablaModelSecuencesList');

                    if (!table) {
                        return;
                    }

                    initDatatableModels();
                    exportButtons();
                    handleSearchDatatableModels();
                }
            };
        }();

        KTUtil.onDOMContentLoaded(function () {
            KTDatatablesTablaModelSecuencesList.init();
        });
    </script>

}